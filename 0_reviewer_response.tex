\documentclass[5p,twocolumn,10pt,times]{elsarticle}
\usepackage{amsmath}
\usepackage{hyperref} % added [draft] to avoid compilation issues that happen if a link is split and appears in two pages
%\modulolinenumbers[5]
\addtolength{\textheight}{8mm}
\addtolength{\textwidth}{4mm}
\addtolength{\voffset}{-10mm}
\addtolength{\hoffset}{-3mm}

\bibliographystyle{elsarticle-num-names}


% ACM template
%
%\documentclass[acmtog,anonymous,timestamp,review]{acmart}
%
%\usepackage{booktabs} % For formal tables
%




% My TK added packages and commands

	% for for using hyperref and elsarticle-num-names together in order to get \citeauthor to work
	\makeatletter
	\providecommand{\doi}[1]{%
	  \begingroup
	    \let\bibinfo\@secondoftwo
	    \urlstyle{rm}%
	    \href{http://dx.doi.org/#1}{%
	      doi:\discretionary{}{}{}%
	      \nolinkurl{#1}%
	    }%
	  \endgroup
	}
	\makeatother

	% have multiline subfigure captions be centered
	\usepackage[labelformat=parens]{subcaption} % subfigures
	\captionsetup[subfigure]{justification=centering}
	\captionsetup{subrefformat=parens} % pure refernce subfigure with parentheses: fig.10a and (b)
	%\renewcommand\thesubfigure{(\alph{subfigure})} % refernce subfigure always with parentheses: fig.10(a) and (b)

	\captionsetup[figure]{labelfont={bf},name={Fig.},labelsep=period} % use `Fig.' for figure subscript instead of `Figure'
	
	\usepackage[export]{adjustbox} % [right] alignment for includegraphics
	
	\usepackage{rotating} % turn env for rotating text in figures

	\usepackage{wrapfig} % inline figures

	% tables
	\usepackage{multirow} % multicolumn, multirow
	\usepackage{colortbl} % \cellcolor{<color>}
	\newcolumntype{C}[1]{>{\centering\arraybackslash}m{#1}}   %% centered
	\newcolumntype{R}[1]{>{\raggedleft\arraybackslash}m{#1}}  %% right aligned

	\usepackage[capitalise]{cleveref} % automatically add `Fig.'  etc before a reference.

        \usepackage{ amssymb } % \therefore
	
	\newcommand{\degree}{^\circ}
	
	\usepackage[binary-units]{siunitx} % mm and stuff
	\sisetup{per-mode = symbol}
	\DeclareSIUnit\pixel{px}

	\usepackage{units} % \nicefrac{3}{8}
	
	
	
	\DeclareMathOperator*{\argmax}{arg\,max}
	\DeclareMathOperator*{\argmin}{arg\,min}
	
	\DeclareMathOperator{\abs}{abs} % absolute function

	\usepackage{amsthm} % \begin{proof}
	\newtheorem{lemma}{Lemma}[section]
	\theoremstyle{definition}
	\newtheorem{definition}{Definition}[section]

	\usepackage[inline]{enumitem} % inline enumerate*

	\usepackage[toc,page]{appendix} % appendicces
	
	\usepackage{pgfplots}
	\usepackage{pgfplotstable} % tikzpicture table plots
	\pgfplotsset{compat=1.15}
	\usetikzlibrary{backgrounds}

	\usepackage[noend]{algpseudocode} % algorithmic
	\usepackage{algorithm} % wrapper for pseudocode to give a caption and label

	\newcommand{\pluseq}{\mathrel{+}=} %pluseq symbol
	\usepackage{upgreek} % \uplambda

	\usepackage{listings} % for listing C++ code instead of pseudocode
	\lstset{ 
      breaklines=true,                 % sets automatic line breaking
      basicstyle=\ttfamily,
      mathescape
    }




    % \usepackage[disable]{todonotes} % notes not showed  
    % \usepackage[draft]{todonotes}   % notes showed
    \usepackage{color,soul} % caps, highlight (\hl)

	\newcommand{\comment}[1]{}
	
%    \newcommand{\todo}[1]{\hl{#1}}
%    
%	\newcommand{\temp}[1]{\textcolor[rgb]{0, 0, 0.2}{#1}}
%	\newcommand{\tim}[1]{\temp{\todo{[Tim: #1]}}}
%	\newcommand{\jun}[1]{\temp{\todo{[Jun: #1]}}}
%	
%	\newcommand{\old}[1]{\textcolor{gray}{#1}}
	\usepackage[normalem]{ulem}
	\newcommand{\stkout}[1]{\ifmmode\text{\sout{\ensuremath{#1}}}\else\sout{#1}\fi}
	
	% Revise macro (usage: \revise{old}{new})
	% Version a) First arg red and striked out, second argument green
	\newcommand{\revise}[2]{\noindent{\color{red}{{#1}}}\par\noindent{\color{blue}{#2}}}
	% Version b) First arg ignored, second argument green
	%\newcommand{\revise}[2]{\textcolor{blue}{#2}}
	% Version c) First arg ignored, second argument unchanged (for final draft)
	%\newcommand{\revise}[2]{#2}

	\usepackage{alltt}
	
	\newcommand{\question}[1]{{\bf#1}}
	\newcommand{\todo}[1]{\par\noindent{\bf \color{orange}#1}}
	\newcommand{\commits}[1]{{\bf\begin{alltt} {#1}\end{alltt}}}
	\newcommand{\response}[1]{{#1}}

\newcommand\Que[1]{%
   \leavevmode\par
   \stepcounter{question}
   \noindent
   \thequestion. {\it#1}\par}

\newcounter{question}
\setcounter{question}{0}

\numberwithin{question}{section}


\usepackage{chngcntr}

\newcommand\subQue[1]{%
   \leavevmode\par
   \stepcounter{subquestion}
   \noindent
   \thesubquestion. {\it#1}\par}

\newcounter{subquestion}
\setcounter{subquestion}{0}

\counterwithin{subquestion}{question}


\newcommand\Ans[2][]{%
    \leavevmode\par\noindent
   {%\leftskip37pt
    {\bf Response:} \textbf{#1}#2\par}}




	\setulcolor{red}

	\usepackage[normalem]{ulem} % squigly underline

	\renewcommand\floatpagefraction{.8}


	\newlength{\figwidth}
	\newlength{\figwidthTwo}
	\newlength{\figwidthTree}
	\newlength{\figheight}
	\newlength{\figheightTwo}
	\newlength{\tempheight}
	\newlength{\tempheightTwo}

	% deal with missing images which are not directly included in the repo
	\iffalse
	\newcommand{\noimage}[1]{%
	  \setlength{\fboxsep}{-\fboxrule}%
	  \fbox{\phantom{\rule{10pt}{10pt}} Missing file: \path{#1} \phantom{\rule{10pt}{10pt}}}% Framed box
	}
	\let\includegraphicsoriginal\includegraphics
	\renewcommand{\includegraphics}[2][width=\textwidth]{\IfFileExists{#2}{\includegraphicsoriginal[#1]{#2}}{\noimage{#2}}}

	\fi
% ENd of TK's added packages and commands



\begin{document}
\baselineskip11pt 

\begin{frontmatter} 

\title{
Response to reviewers
\\
\large{A framework for adaptive width control of dense contour-parallel toolpaths in additive manufacturing}
}


%\author{Paper ID: xxx}

\author[um,tud]{Tim Kuipers}
\author[tud]{Eugeni L. Doubrovski}
\author[tud]{Jun Wu}
\author[cuhk]{Charlie Wang}
% \ead{cwang@mae.cuhk.edu.hk}
\address[um]{Ultimaker, Utrecht, The Netherlands}
\address[tud]{Department of Design Engineering, Delft University of Technology, The Netherlands}
\address[cuhk]{Department of Mechanical and Automation Engineering, The Chinese University of Hong Kong, Hong Kong SAR, China}

\begin{abstract}
We have more clearly distinguished our work from existing methods.
We have introduced extensions to the beading schemes:
\begin{enumerate*}
\item the widening meta-scheme is extended with a minimal feature size, in order to allow for a fair comparison between the various techniques 
and
\item a limiting meta-scheme is introduced which only generates the outer $N$ insets, so that the framework can readily be combined with the direction-parallel strategy in a manner common in FDM.
\end{enumerate*}
The results have been recalculated accordingly.
We have developed a new manufacturing method which doesn't rely on custom machinery and which clearly shows the feasibility of adaptive bead width.
We have computed fabrication time results.
We have added a video animation explaining the union of cones approach in an intuitive manner.
We have made various language fixes and improvements to images to address some of the reviewers' comments.
\end{abstract}

%
% The code below should be generated by the tool at
% http://dl.acm.org/ccs.cfm
% Please copy and paste the code instead of the example below.
%
%\begin{CCSXML}
%\end{CCSXML}

%\ccsdesc[500]{Computer systems organization~Embedded systems}
%\ccsdesc[300]{Computer systems organization~Redundancy}
%\ccsdesc{Computer systems organization~Robotics}
%\ccsdesc[100]{Networks~Network reliability}

\end{frontmatter}

\Que{Example question by reviewer}
\Ans{Example response}
\revise{Old text in manuscript}{New text in manuscript}
\todo{Comment for us internally (should be removed before this letter is sent).}
\commits{123commit-hash}

\section{Reviewer 1}
Overall, the paper proposes some novel frameworks which are meaningful to additive manufacturing. Therefore, I suggest it for publication once the following major comments are addressed. 

\Que{
Could the authors provide a mathematical foundation for the relationship between the underfill/overfill areas and the allowed variation of bead width? I believe the proposed beading scheme can reduce the underfill/overfill areas somehow. But we still lack a mathematical theory to guide the design.
}

\todo{
Refer to fig 5 and comment about 3-way intersections and 3-way gaps
Try to make a formula which predicts the amount of over- and underfill

Tim: I actually think this question is mostly related to DfAM. I think we should add something like the following to the manuscript:
}

\revise{}{
Suppose that under some criterion of manufacturability we have established that we can attain bead widths within the range $[w_\text{min}, w_\text{max}]$.
We can then conclude that in order for a model to be manufacturable its widths should be within the set of ranges $\bigcup_{i\in \mathcal{N}}([i w_\text{min},i w_\text{max}])$.
If $w_\text{max} > 2 w_\text{min}$ this reduces to $[w_\text{min}, \infty]$
If $w_\text{max} = w_\text{min} = w^*$ this reduces to $\{w^*, 2w^*, 3w^* \dots\}$
If for example $\nicefrac23 w_\text{min} < w_\text{max} < 2 w_\text{min}$, a manufacturable model should have widths in the ranges $\{[w_\text{min},w_\text{max}],[2 w_\text{min}, \infty]\}$

However, we propose no such binary criterion of manufacturability; instead we assume that the manufacturability generally goes down as the requested bead width variation goes up. By keeping the bead widths closer to a nominal bead width we guarantee the manufacturability goes up for any manufacturability measure.
}
\todo{Actually add this to the manuscript!}



\stepcounter{question}

\subQue{
The authors should highlight their contributions compared to the existing approaches for generating toolpaths with adaptive width.
}
\Ans{
afs
}
\commits{66d006d91d406c0064ee1f4f1e4df85fc0821994}

\subQue{
From Fig. 1(b) and (c), we can see that the approach in Jin et al (2017) can fill the sharp right end, but the proposed approach can not. 
}
\Ans{
We now use the same minimal feature size in all approaches.
This is now handled by the \emph{widening} meta-scheme.
We have added a figure to show that functionality.
See also our response to 1.6.
}
\todo{add widening changes; explain how widening is used in generating the results}
\commits{a5ddf3a73e3df20e43f25eafb93e9ce3a1393b13, d3fe6c86ee887da0e33fefdc43a83d014bc6047b, 0ac1c930a7cd2d1d305da730c9d5db20f4a8ea3f}

\todo{
Tim:
Any beading scheme can easily be modified to change the minimal feature width, simply by supplying that $q(d) = 0$ if $d < w_\text{min}$ and that $q(d) = 1$ if $w_\text{min} < d < w^*$

Tim: changed widening scheme to handle both minimal feature size and minimal bead width
@others: The new widening scheme figure now shows a bug in widening, perhaps we should only control the min feature size and leave out widening.

Note: our tests do compare beading schemes with different $w_\text{min}$.
? Should we redo the tests?
}

\subQue{
If there is no sharp corners exist, then the existing approaches such as Jin et al (2017) do not have to use bead widths of large variations. 
}

that’s not true

\Que{
How do the authors conduct path planning? Could the authors add a simple 2D geometry with multiple holes to explain the path planning process? As the proposed approach adds more disconnected toolpaths to minimize underfill areas, an improper path planning would significantly increase the fabrication time. 
}

\todo{
Show results on printing time

Mention that the path order is not optimized
}

\Que{
While the proposed approach can use adaptive bead width to minimize underfill and overfill areas, the generated toolpaths are disconnected compared to the traditional approaches. From my experience, a small overfill area does not have to lead to serious defects. But the disconnected filaments definitely have worse mechanical performances compared to the continuous ones. 
}

We don’t know the effect…

Split overfill and underfill areas and compute the amount of components and make statistics

Tim: get statistics on nuber of areas with a size larger than $0.1 w^*$

Tim: That might be true, but the microgaps near 3-way intersections are not fillable using overfilling; the plastic cannot creap into those cravices.

\Que{
Why the authors state the inward distributed beading scheme as new? Jin et al (2017) has proposed the strategy to add a toolpath with varying width along the center edges of the skeleton, and with unchanging width outside. 1 
}

Tim: we should change the text to stress that we distribute the discrepancy over several beads rather than always over one bead.

\Que{
\label{fig1geometry}
In Fig.1, how to justify the proposed approach as different geometries are used? I believe if the authors use the same geometries as in Fig 1. (a) and (b), there would be also underfill areas using the proposed approach. 
}
\Ans{
There are two ways in which we can interpret this question, leading to two responses.
The question can be interpreted as saying that Fig a has a different geometry than b or c.
There is now a black outline to show that the shapes in Fig 1a, b and c are actually the same geometry, and the output is less confusing because we now use the same minimum feature size for b and c.

The question can also be interpreted as saying that one might use a different shape than the geometry in Fig 1.
We decided on this wedge shape because it shows how the techniques deal with a wide range of feature sizes;
the wedge shape can be read as a graph where we can read out the resulting beading for any local feature size.
}
\todo{redo tests with min feature size}
\commits{45853e8b30d93f60e9465cbb649e347f9cfc23b1, 53224c04ceff6c1b18a9eea6de8e7e33957b7797}

\Que{
Please double check the following sentences. ”Third, the extruded path should ...”(at the second paragraph of Section 2) ”This the downward phase...” (at the last paragraph of Section 3.5) 
}
Okay. Thanks.

\commits{eb2a5207c83dfe069d3ab3fc37bf2149b8a51964}


\Que{
In Fig.4, the bead count should marked in another way. The ultra thick solid line conflicts with that for ”outline”. 
}
\Ans{
Note that the bead count is the number, not the arrow from the number.
The arrow is now a double thin line.
}
\commits{07df258c1fa618808ba9493384550021a03c83e1}

\Que{
What are the differences between the distributed and the inward scheme in Fig. 16(d) and (e)? Are they the same? 
}
\Ans{
We have adjusted the range of the inward distributed scheme to $N=2$ in order to generate a bigger difference between these images.
}
\commits{735762b1e7daf31ae4465bf288ef867ded7da095}

\Que{
In Fig. 17(b), where is the curve for the ”uniform” case?
}
\Ans{
Done.
Note that the width of the uniform case is \SI{0.4}{\milli\meter} \emph{everywhere}, so the curve we now added to the graph is not really informative.
}
\commits{e5f3649455c73c8146e8d07cce13bc1e89d84cbb}

\section{Reviewer 2}
The paper is generally well written with clear illustrations. 
\Que{
There are occasional omissions, perhaps unintentional, such as the definition of a skeleton - see section 3.1, second paragraph. 
}
\Ans{
Indeed we have intentionally not defined the term `skeleton'.
It seems that there is no generally accepted \emph{intuitive} definition of `skeleton';
the first occurance of the term was as synonymous with the medial axis and it was only defined \emph{mathematically}.
However, the term is now used as an umbrella term for the various different types of skeleton.
We have changes the wording a bit to make clear that `skeleton' refers to an undefined umbrella term.
}
\commits{5356492b5a9a690228ffdb6a6a26cf10d099a7d4}


\stepcounter{question}
\subQue{
The authors seem to use linear approximations of the medial axis - see Figure 2 (b), which is understandable given the fact that they compute the MA with the Boost library. If this is so, can the authors comment on the implications of this approximation?
}

Quantify the approximation error depending on discretization size


\subQue{
For example, what happens if the obtuse outside angle in Figure 2 goes to 0? 
}
Poor example, because as the degree goes to zero the parts ofo the parabola revealed are more accurately described by the discretization than the highly curved part in the middle.

\Que{
As the authors correctly point out, the MA is not piecewise linear even for polygonal boundaries. In 3.2, second paragraph, the authors state that "the medial axis is a compact and complete representation of the shape". First, the MA + the radius function can be considered a shape representation, which is not true for the MA by itself. Second, the statement that the authors is meant to be generic, but it is not clear what compact means for a medial axis that is not piecewise linear. One can argue that the polygon itself is a rather compact representation of the shapes considered in this manuscript. 
}
\Ans{
Indeed the statement was meant generically, but we agree it lacked substance.
The wording is now changed to better describe the general role of the medial axis in research.
}
\commits{d3f19c04e3bb0d80c0b162531dbf576fc705d77c}

\Que{
More generally, the technique seems to effectively be a variable offset scheme, but there is little discussion about what is known about variable offsets. 
Find more literature
}

elber1991error, 

\Que{
Moreover, the proposed technique seems to rely on rather accurate control of the width w of the deposited material, but it is not clear whether such control is achievable in practice. 
}
\Ans{
The photos of our print results already showed that adaptive width control is possible up to some (insufficient) extent.
We have developed a new method for actualizing adaptive width control which can readily be applied to unmodified FDM systems such as the Ultimaker S5: linear backpressure compensation.
We show the results of linear backpressure compensation in a separate figure which clearly shows the achieved variance in bead width.
}
\todo{
Show S5 prints. 
The proposed technique relies \emph{less} on the accuracy of the control than existing techniques – as exemplified by Fig 17b.
}
\commits{3d7238e2787f17c4cff63804eb4b84439ff85f1b}

\Que{
At the same time, the scheme can potentially result in trajectories with many inflection points - this is slow and demanding for the machine. 
Show print time results
}

\Que{
Finally, the examples provided depict the results obtained by the authors by "emulating" other techniques, but not with the actual results produced by the other techniques. While the reason behind this choice is easy to guess, it weakens the effectiveness of the claims. Adding careful discussions/extensions to support these questions would make the paper stronger.
}
Discuss how much the over-fill / underfill and bead width variation depend on the fact that our reimplementations are only approximations.









\section{Reviewer 3}
Paper is well written. It is mostly easy to follow but overall, I find the the contributions somewhat incremental and the motivation not convincing. The paper mostly feels like a technical report. I am not sure if the methods overall teach enough to the researchers in the field to open up new research possibilities. My specific comments are below: 

\Que{
The title is a little misleading that the presented approach may be used for general “Additive Manufacturing”. However, my understanding from the text is that it is designed particularly for FDM. I believe it is important to highlight this in the title. Otherwise, there should be enough evidence to prove that it can be applied to other kinds of printing processes, such as SLS, SLA, DMLS etc. 
}
The title has changed.
\revise{additive manufacturing}{fused deposition modeling}
\commits{64eb2f2c1cbb28258a984b5f84ea6e3a039ee1f0}


\Que{
It would be nice to discuss why contour-parallel toolpaths are needed or selected. In what situations, these are required as opposed to zigzag style (or direction-parallel as referred in the text) patterns. Without such a discussion, the motivation seems a little weak. In the second paragraph of introduction, there is a short discussion about this but it sounds like the authors assume that even the perimeters (or outline) are printed with direction-parallel extrusion. However, common approach in FDM is to print the perimeters with contour parallel toolpaths and fill the inner region with direction-parallel paths only (as later acknowledged in the related work 3rd paragraph). I think the motivation for contour parallel toolpaths needs to be justified further. 
}
\Ans{
The industry standard is to use a combination of contour-parallel and direction-parallel.
We now clarify why contour-parallel is (partly) used and that in as much as contour-parallel is used, our approach improves on the industry standard.
}
\todo{
Add some sentences to make it clear

Show LimitedBeadingStrategy or StrategyType::OutlineAccuracy

explain this paper can be used in normal slicing
}

\commits{6b0f8c78d31bd0c6946885da96f73f1cfc1a21ae, ac800628951417dcb28bd6e3a0ed08801735acf4}

\Que{
Related work acknowledges the previous work sufficiently. However, the differences between the state of the art and the presented work are not clear. More discussion on where this work stands with respect to the state of the art is required. 
}
\todo{
Add discussion points?
}
\commits{004894210fbc961f82b792fc702d1b67a1a8e8e8}

\Que{
Isn’t it possible to put bounds on the width in the existing methods, such as the approach described in [9]? More discussion on that would be helpful. 
}
\Ans{
The bead width in Jin et al. is limited to $0.5 w^*$ to $1.8 w^*$ , which means the variation is a factor of $3.2$; this was already described in the related work section, but the factor was wrongly said to be $2$ instead of $3.2$.
}
\todo{
Its not about bounds, its about how often the extremes happen
}
\commits{661d8f6766548c287cb174070432097e396d198f}

\Que{
Figure 4 and corresponding explanation in Section 3.2 are confusing. Why such decomposition is needed is not clear to me. 
}
Maybe put something like “this figure is for back-reference if you forgot what a thing is for”

Are you sure you mean figure 4? Maybe figure 3 or figure 2?

\Que{
In Figure 3, why some of the edges in (c) (the ones in the center area) disappear in (d)?
}
Fixed. Fig 3 c and d now have the same discretization.
\commits{43cadb352a6a276bbaaab53f9b5b217bec4b3a2e}

\Que{
It is unclear how some of the parameters are adjusted, such as $\alpha_\text{max}, d_\text{max}^\text{unmarked}, d_\text{transition}^\text{max}, t_\text{beading}, d_\text{intersection}^\text{max}$. What are their effects on the end result? Selections seem somewhat arbitrary. 
}
Make my resaons for choosing these more explicit



\Que{
Is this approach generalizable to sparse infill? It is very common in FDM to use a sparse infill and only use dense fill on surface regions.
}
The goal of this paper is to minimize underfill using a low variation in bead width; generalizing it to sparse infill makes no sense because there the ‘underfill’ is intentional.

\commits{6b0f8c78d31bd0c6946885da96f73f1cfc1a21ae}


\Que{
If this is used for outer surface, what are the implications on the surface quality in comparison to other approaches? 
}
This is one of the usecases why this is a good method
Discuss effect of this algorithm on the outline accuracy

\Que{
I think Figure 13 should be replaced with a table. 
}
Done.
\commits{735762b1e7daf31ae4465bf288ef867ded7da095}

\Que{
In text, some references are missing, such as first sentence of “Outer bead” paragraph in Section 4 (Moesen et al [?]), first sentence of “Constant bead count” (Ding et al [?]) paragraph in Section 4 etc. 
}
\Ans{
We cannot reproduce this typesetting bug. Please inform the proofing department to take extra care of these references when preparing this manuscript for publication.
}

\Que{
Evaluation in the results section is overall good but it is not clear what are the implications of the presented approach on the complete 3D result. A discussion on this would be helpful.
}
Perhaps discuss effect of width changes on amount of fusing between layers

\Que{
What are the limitations of the presented algorithm? I do not see any discussions of the limitations of the algorithm.
}
Linear approximations 
a lot of direction changes














\section{Other changes}
We have fixed some issues with positions and colors being swapped in the statistical analysis subfigures.
Fig 17f colors are adjusted.
Fig 17e and 17f are swapped.
\commits{43cadb352a6a276bbaaab53f9b5b217bec4b3a2e}

Improvements to abstract.
\commits{c5ecf8f8c5c15266059278a6b4c26774446e7854}

Fix double header of References.
\commits{7597b176f6a88ae98c8c7a4c791475af356b3da6}

Added patent notice and url to open source implementation.
\commits{ff3c09037f05eba5028cb51bf8cd6c0bb77a0b0a}

Lil
\commits{5f5c4c640d94010816e6d6d5934a2dc016b4d172}



\end{document}
